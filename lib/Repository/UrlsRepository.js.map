{"version":3,"sources":["../../src/Repository/UrlsRepository.js"],"names":["UrlsRepository","constructor","option","args","findForRange","urlsFile","path","join","output","filename","getSiteName","startUrl","endUrl","hasOwnProperty","a11y","pa11yLogin","JSON","parse","fs","readFileSync","toString","slice","map","entry","Url","name","url","fragment","findAll"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEe,MAAMA,cAAN,CAAqB;AAIhCC,EAAAA,WAAW,CAACC,MAAD,EAAiBC,IAAjB,EAA6B;AACpC,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACH,GAP+B,CAShC;;AACA;;;;;AAGAC,EAAAA,YAAY,GAAU;AAClB,QAAIC,QAAQ,GAAGC,cAAKC,IAAL,CAAU,KAAKJ,IAAL,CAAUK,MAAV,CAAiBC,QAA3B,EAAqC,KAAKN,IAAL,CAAUO,WAAV,EAArC,EAA8D,MAA9D,EAAsE,WAAtE,CAAf;;AACA,QAAIC,QAAQ,GAAG,CAAf;AACA,QAAIC,MAAM,GAAG,CAAC,CAAd;;AACA,QAAI,KAAKV,MAAL,CAAYW,cAAZ,CAA2B,MAA3B,KAAsC,KAAKX,MAAL,CAAYY,IAAZ,CAAiBD,cAAjB,CAAgC,YAAhC,CAA1C,EAAyF;AACrF,UAAI,KAAKX,MAAL,CAAYY,IAAZ,CAAiBC,UAAjB,CAA4BF,cAA5B,CAA2C,UAA3C,CAAJ,EAA4D;AACxDF,QAAAA,QAAQ,GAAG,KAAKT,MAAL,CAAYY,IAAZ,CAAiBC,UAAjB,CAA4BJ,QAAvC;AACH;;AACD,UAAI,KAAKT,MAAL,CAAYY,IAAZ,CAAiBC,UAAjB,CAA4BF,cAA5B,CAA2C,QAA3C,CAAJ,EAA0D;AACtDD,QAAAA,MAAM,GAAG,KAAKV,MAAL,CAAYY,IAAZ,CAAiBC,UAAjB,CAA4BH,MAArC;AACH;AACJ;;AACD,WAAOI,IAAI,CAACC,KAAL,CAAWC,YAAGC,YAAH,CAAgBd,QAAhB,EAA0Be,QAA1B,EAAX,EACFC,KADE,CACIV,QADJ,EACcC,MADd,EAEFU,GAFE,CAEEC,KAAK,IAAI;AACV,aAAO,IAAIC,YAAJ,CAAQD,KAAK,CAACE,IAAd,EAAoBF,KAAK,CAACG,GAA1B,EAA+BH,KAAK,CAACI,QAArC,CAAP;AACH,KAJE,CAAP;AAKH;AAGD;;;;;AAGAC,EAAAA,OAAO,GAAU;AACb,QAAIvB,QAAQ,GAAGC,cAAKC,IAAL,CAAU,KAAKJ,IAAL,CAAUK,MAAV,CAAiBC,QAA3B,EAAqC,KAAKN,IAAL,CAAUO,WAAV,EAArC,EAA8D,MAA9D,EAAsE,WAAtE,CAAf;;AACA,WAAOM,IAAI,CAACC,KAAL,CAAWC,YAAGC,YAAH,CAAgBd,QAAhB,EAA0Be,QAA1B,EAAX,EACFE,GADE,CACEC,KAAK,IAAI;AACV,aAAO,IAAIC,YAAJ,CAAQD,KAAK,CAACE,IAAd,EAAoBF,KAAK,CAACG,GAA1B,EAA+BH,KAAK,CAACI,QAArC,CAAP;AACH,KAHE,CAAP;AAIH;;AA1C+B","sourcesContent":["// @flow\nimport fs from \"fs\";\nimport Url from \"../Model/Url\";\nimport Args from \"../Model/Args\";\nimport Option from \"../Model/Option\";\nimport path from \"path\";\n\nexport default class UrlsRepository {\n    option: Option;\n    args: Args;\n\n    constructor(option: Option, args: Args) {\n        this.option = option;\n        this.args = args;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Find urls for range specified in the Pa11yLogin\n     */\n    findForRange(): Url[] {\n        let urlsFile = path.join(this.args.output.filename, this.args.getSiteName(), 'urls', 'urls.json');\n        let startUrl = 0;\n        let endUrl = -1;\n        if (this.option.hasOwnProperty('a11y') && this.option.a11y.hasOwnProperty('pa11yLogin')) {\n            if (this.option.a11y.pa11yLogin.hasOwnProperty('startUrl')) {\n                startUrl = this.option.a11y.pa11yLogin.startUrl;\n            }\n            if (this.option.a11y.pa11yLogin.hasOwnProperty('endUrl')) {\n                endUrl = this.option.a11y.pa11yLogin.endUrl;\n            }\n        }\n        return JSON.parse(fs.readFileSync(urlsFile).toString())\n            .slice(startUrl, endUrl)\n            .map(entry => {\n                return new Url(entry.name, entry.url, entry.fragment);\n            });\n    }\n\n\n    /**\n     * Find urls for range specified in the Pa11yLogin\n     */\n    findAll(): Url[] {\n        let urlsFile = path.join(this.args.output.filename, this.args.getSiteName(), 'urls', 'urls.json');\n        return JSON.parse(fs.readFileSync(urlsFile).toString())\n            .map(entry => {\n                return new Url(entry.name, entry.url, entry.fragment);\n            });\n    }\n}"],"file":"UrlsRepository.js"}