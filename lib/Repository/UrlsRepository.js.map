{"version":3,"sources":["../../src/Repository/UrlsRepository.js"],"names":["UrlsRepository","constructor","option","args","findForRange","urlsFile","path","join","output","filename","getSiteName","startUrl","endUrl","hasOwnProperty","a11y","pa11yLogin","JSON","parse","fs","readFileSync","toString","slice","map","entry","Url","name","url","fragment","findAll"],"mappings":"6FACA,8CACA,yDACA,2DACA,+DACA,kD,kFAEe,KAAMA,CAAAA,cAAe,CAIhCC,WAAW,CAACC,MAAD,CAAiBC,IAAjB,CAA6B,CACpC,KAAKD,MAAL,CAAcA,MAAd,CACA,KAAKC,IAAL,CAAYA,IACf,CAED;AACA;;OAGAC,YAAY,EAAU,CAClB,GAAIC,CAAAA,QAAQ,CAAGC,cAAKC,IAAL,CAAU,KAAKJ,IAAL,CAAUK,MAAV,CAAiBC,QAA3B,CAAqC,KAAKN,IAAL,CAAUO,WAAV,EAArC,CAA8D,MAA9D,CAAsE,WAAtE,CAAf,CACA,GAAIC,CAAAA,QAAQ,CAAG,CAAf,CACA,GAAIC,CAAAA,MAAM,CAAG,CAAC,CAAd,CACA,GAAI,KAAKV,MAAL,CAAYW,cAAZ,CAA2B,MAA3B,GAAsC,KAAKX,MAAL,CAAYY,IAAZ,CAAiBD,cAAjB,CAAgC,YAAhC,CAA1C,CAAyF,CACrF,GAAI,KAAKX,MAAL,CAAYY,IAAZ,CAAiBC,UAAjB,CAA4BF,cAA5B,CAA2C,UAA3C,CAAJ,CAA4D,CACxDF,QAAQ,CAAG,KAAKT,MAAL,CAAYY,IAAZ,CAAiBC,UAAjB,CAA4BJ,QAC1C,CACD,GAAI,KAAKT,MAAL,CAAYY,IAAZ,CAAiBC,UAAjB,CAA4BF,cAA5B,CAA2C,QAA3C,CAAJ,CAA0D,CACtDD,MAAM,CAAG,KAAKV,MAAL,CAAYY,IAAZ,CAAiBC,UAAjB,CAA4BH,MACxC,CACJ,CACD,MAAOI,CAAAA,IAAI,CAACC,KAAL,CAAWC,YAAGC,YAAH,CAAgBd,QAAhB,EAA0Be,QAA1B,EAAX,EACFC,KADE,CACIV,QADJ,CACcC,MADd,EAEFU,GAFE,CAEEC,KAAK,EAAI,CACV,MAAO,IAAIC,aAAJ,CAAQD,KAAK,CAACE,IAAd,CAAoBF,KAAK,CAACG,GAA1B,CAA+BH,KAAK,CAACI,QAArC,CACV,CAJE,CAKV,CAGD;;OAGAC,OAAO,EAAU,CACb,GAAIvB,CAAAA,QAAQ,CAAGC,cAAKC,IAAL,CAAU,KAAKJ,IAAL,CAAUK,MAAV,CAAiBC,QAA3B,CAAqC,KAAKN,IAAL,CAAUO,WAAV,EAArC,CAA8D,MAA9D,CAAsE,WAAtE,CAAf,CACA,MAAOM,CAAAA,IAAI,CAACC,KAAL,CAAWC,YAAGC,YAAH,CAAgBd,QAAhB,EAA0Be,QAA1B,EAAX,EACFE,GADE,CACEC,KAAK,EAAI,CACV,MAAO,IAAIC,aAAJ,CAAQD,KAAK,CAACE,IAAd,CAAoBF,KAAK,CAACG,GAA1B,CAA+BH,KAAK,CAACI,QAArC,CACV,CAHE,CAIV,CA1C+B,C","sourcesContent":["// @flow\nimport fs from \"fs\";\nimport Url from \"../Model/Url\";\nimport Args from \"../Model/Args\";\nimport Option from \"../Model/Option\";\nimport path from \"path\";\n\nexport default class UrlsRepository {\n    option: Option;\n    args: Args;\n\n    constructor(option: Option, args: Args) {\n        this.option = option;\n        this.args = args;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Find urls for range specified in the Pa11yLogin\n     */\n    findForRange(): Url[] {\n        let urlsFile = path.join(this.args.output.filename, this.args.getSiteName(), 'urls', 'urls.json');\n        let startUrl = 0;\n        let endUrl = -1;\n        if (this.option.hasOwnProperty('a11y') && this.option.a11y.hasOwnProperty('pa11yLogin')) {\n            if (this.option.a11y.pa11yLogin.hasOwnProperty('startUrl')) {\n                startUrl = this.option.a11y.pa11yLogin.startUrl;\n            }\n            if (this.option.a11y.pa11yLogin.hasOwnProperty('endUrl')) {\n                endUrl = this.option.a11y.pa11yLogin.endUrl;\n            }\n        }\n        return JSON.parse(fs.readFileSync(urlsFile).toString())\n            .slice(startUrl, endUrl)\n            .map(entry => {\n                return new Url(entry.name, entry.url, entry.fragment);\n            });\n    }\n\n\n    /**\n     * Find urls for range specified in the Pa11yLogin\n     */\n    findAll(): Url[] {\n        let urlsFile = path.join(this.args.output.filename, this.args.getSiteName(), 'urls', 'urls.json');\n        return JSON.parse(fs.readFileSync(urlsFile).toString())\n            .map(entry => {\n                return new Url(entry.name, entry.url, entry.fragment);\n            });\n    }\n}"],"file":"UrlsRepository.js"}